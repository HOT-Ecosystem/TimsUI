<!DOCTYPE html>
<html>
    <head> <title>TSDemoboard</title>
        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <!-- JavaScript Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

      <script src="fhir.js"></script>  
      <script src="code_system.js"></script>  
      <link rel="stylesheet" type="text/css" href="fhir.css" media="screen">
    </head>

    <body>
    <center><h1>Query a FHIR Terminology Server <em>by Codes</em> </h1></center>
    see also <a href="value_sets.html">Query ValueSets</a><br>
    and <a href="/fhir/swagger-ui/index.html">Swagger</a><br>
    </p>
    <center>
    <table>
        <tr>
            <td colspan=2> <em>Enter a Server to use: </em> </td>
            <td colspan=1><label for="server">Server:</label></td>
            <td>
                <select name="server" id="server">
                    <option value="http://20.119.216.32:8888/fhir">TIMS 8888</option>
                    <option value="http://20.119.216.32:8080/fhir">TIMS 8080</option>
                    <option value="http://20.119.216.32:8001/fhir">TIMS 8001</option>
                    <option value="http://127.0.0.1:8001/fhir">local 8001</option>
                </select> 
            </td>
        </tr>
        <tr>
            <td colspan=2>&nbsp </td>
            <td></td>
            <td colspan=2>
                <button type="submit" onClick="query_loaded_codesystems(document.getElementById('server').value)">Show Loaded CodeSystems (pop-up)</button>
            </td>
        </tr>
        <tr> <td colspan=3>&nbsp </td> </tr>
        <tr>
            <td colspan=2><em>Choose a CodeSystem.</em> </td>
            <td colspan=1><label for="system">System:</label></td>
            <td><select name="system" id="system">
              <option value="http://loinc.org">LOINC</option>
              <option value="http://loinc.org/part">comp-loinc</option>
              <option value="http://snomed.info/sct">SNOMED</option>
              <option value="http://hl7.org/fhir/sid/icd-10-cm">ICD-10 CM</option>
              <option value="http://purl.obolibrary.org/obo/hp.fhir">HP</option>
              <option value="http://purl.obolibrary.org/obo/mondo.fhir">MONDO</option>
              <option value="http://purl.obolibrary.org/obo/so.fhir">SO</option>
              <option value="http://hl7.org/fhir/CodeSystem/CPT4-2021 Release">CPT4</option>
              <option value="http://purl.bioontology.org/ontology/RXNORM">RxNorm</option>
            </select> </td>
        </tr>
        <tr> <td colspan=3>&nbsp </td> </tr>
        <tr>
            <td colspan=2><em>Specify a code to lookup. &nbsp; &nbsp; &nbsp; &nbsp;  </em> </td>
            <td colspan=1><label for="code">Code:</label></td>
            <td><input type="text" id="code" name="code"></td>
        </tr>
        <tr>
            <td colspan=3><em>Click to search.</em> </td>
            <td><button type="submit" 
                 onClick="getFhir(
                        document.getElementById('server').value, 
                        document.getElementById('system').value, 
                        document.getElementById('code').value)"
                >Search for Code</button></td>
        </tr>
        <tr>
            <td colspan=2>&nbsp </td>
            <td>&nbsp</td>
            <td >
                <button type="submit" onClick="getFhirDetail( 
                    document.getElementById('server').value, 
                    document.getElementById('system').value, 
                    document.getElementById('code').value)" >Search, with detailed output (pop-up)</button>
            </td>
        </tr>
        <tr>
           <td colspan=1>&nbsp</td>
            <td><em>Query:</em></td>
            <td>System: <output type="text" id="input-system" name="input-system"></td>
            <td>Code: <output type="text" id="input-code" name="input-code"></td>
        </tr>
        <tr>
           <td>&nbsp</td>
            <td colspan=1><em>Results:</em></td>
            <td>System: <output type="text" id="output-system" name="output-system"></td>
            <td>Label: <output type="text" id="output-label" name="output-label"></td> 
        </tr>
        <tr>
           <td>&nbsp</td>
           <td>&nbsp</td>
           <td><output type="text" id="output-synonym-heading" name="output-synonym-heading"></td>
           <td colspan=2><output type="text" id="output-synonym-value" name="output-synonym-value"></td>
        </tr>
        <tr>
           <td>&nbsp</td>
           <td colspan=1>&nbsp</td>
           <td colspan=1>&nbsp</td>
           <td><output type="text" id="output-definition-heading" name="output-definition-heading"></td>
           <td colspan=2><output type="text" id="output-definition-value" name="output-definition-value"> </td>
        </tr>

        <tr>
            <td colspan=2>&nbsp </td>
            <td>Value Sets:</td>
            <td >
                <button type="submit" onClick="getValueSetSummaryByCode( 
                    document.getElementById('server').value, 
                    document.getElementById('code').value)">Search for first ValueSet that contains this code.</button>
            </td>
        </tr>
        <tr>
            <td colspan=3>&nbsp </td>
            <td>
                <button type="submit" onClick="getValueSetRawByCode( 
                    document.getElementById('server').value, 
                    document.getElementById('code').value)">Search for all ValueSets that contain this code. (raw pop-up)</button>
            </td>
        </tr>
        <tr> 
            <td colspan=2>&nbsp</td> 
            <td>id:</td>
            <td colspan=2><output id="output-valueset-id" class="multiline"></output></td> 
        </tr>
        <tr> 
            <td colspan=2>&nbsp</td> 
            <td>name:</td>
            <td colspan=2><output id="output-valueset-name" class="multiline"></output></td> 
        </tr>
        <tr> 
            <td colspan=2>&nbsp</td> 
            <td>url:</td>
            <td colspan=2><output id="output-valueset-url" class="multiline"></output></td> 
        </tr>

        <tr> <td colspan=3>&nbsp </td> </tr>
        <tr>
            <td colspan=3> &nbsp &nbsp &nbsp &nbsp </td>
        </tr>
        <tr>
            <td colspan=2>&nbsp</td>
            <td colspan=1> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                           &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </td>
            <td colspan=1>&nbsp</td>
        </tr>

        <tr>
           <td colspan=1>&nbsp</td>
           <td colspan=1> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                    &nbsp; &nbsp; &nbsp;
                    &nbsp; &nbsp; &nbsp;
            </td>
           <td colspan=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                           &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </td>
        </tr>
    </table>
    </center>
    <p>
    </p>
    <p>
        Sample codes for ICD: A02.20, A03 <br>
        Sample codes for LOINC: 66678-4 (has a second label), LA6668-3, LA13838-0 (has value sets) <br>
        Sample codes for MONDO: MONDO:0000001 MONDO:8000001<br>
        Sample codes for SO: SO:0000001<br>
        Sample codes for HPO: HP:0000001, HP:4000001<br>
        Sample codes for SNOMED: 4557003, 84114007, 703272007, 703275009<br>
        Sample codes for RxNorm Drugs: 1656346<br>
        Sample codes for RxNorm Ingredients: 1656328, 69749<br>
    </p> <p>
    Many servers linked here use <a href="https://hapifhir.io/">HAPI-FHIR</a>,
    licensed under the <a href="https://hapifhir.io/hapi-fhir/license.html">Apache Software License 2.0.</a>
    </p>
</body>
</html>
